module.exports = function() {
    var dir_window = {
        fs : require('fs'),
        path : require('path'),
        context : '',
        getPath : function(dir, callback) {
            var self = this;
            var testPath = this.context + dir + '/';
            this.fs.readdir(testPath, function(err, files) {
                if (err) {
                    callback(err, []);
                } else {
                    for (var file = files.length - 1; file >= 0; file--) {
                        // inspect every item, remove non-dirs and files
                        try {
                            fstats = self.fs.statSync(testPath + files[file]);
                            if (!fstats.isDirectory()) {
                                files.splice(file, 1);
                            }
                        } catch(err) {
                            files.splice(file, 1);
                        }
                    }
                    // update context
                    self.context = testPath;
                    callback(err, files);
                }
            });
        },
        save : function() {}
    }
    return dir_window;
}